# 在庫・売上管理ツール

※ 開発者・技術者向けの説明はこちら → [TECHNICAL.md](TECHNICAL.md)

---

## このアプリでできること

* 商品を登録する（商品マスタ）
* 在庫を増やす・減らす（入庫 / 出庫）
* 複数商品をまとめて入庫・出庫
* 在庫の履歴を確認する（一覧・グラフ）
* 顧客ごとに売上を記録する
* 売上の合計を確認する（顧客別・全体）

※ 売上入力は **在庫数には影響しません**

---

## 1. 準備するもの（Windows）

### 1.1 Python をインストールする（初回のみ）

このリポジトリから `.bat` で実行ファイル（`.exe`）を作るために Python が必要です。

1. Windows の検索で **Microsoft Store** を開く
2. **Python 3.11**（または 3.10 以上）をインストール

確認方法:

1. **PowerShell** を開く
2. 次を入力して Enter

```powershell
python --version
```

`Python 3.xx.x` と表示されればOKです。  
（`py --version` が使える環境ならそれでも問題ありません）

---

## 2. アプリをダウンロードする

1. GitHub のページを開く
2. **Code** → **Download ZIP** をクリック
3. ダウンロードした ZIP を右クリックして **すべて展開**

展開したフォルダ（例: `inventory-sales-tool-main`）を開きます。

---

## 3. `.bat` で起動用 exe とショートカットを作る（推奨）

この手順を実行すると、次が自動で行われます。

- 仮想環境（`.venv`）の作成と依存関係インストール
- PyInstaller による `.exe` 作成
- 配布用フォルダ `_dist\inventory-sales-tool\` の作成
- `sales_inventory_tool.json` の配置（無ければ空で生成）
- デスクトップにショートカット（`.lnk`）を作成（作業フォルダを固定）

### 3.1 PowerShell（またはコマンドプロンプト）を開く

1. 展開したフォルダを開く
2. フォルダの空白部分で **Shift + 右クリック**
3. **ターミナルをここで開く**（または PowerShell / コマンドプロンプト）を選ぶ

---

### 3.2 ビルド＆ショートカット作成

次を実行します。

```powershell
.\build_and_shortcut.bat
```

完了すると、デスクトップに `inventory-sales-tool` のショートカットが作られます。

---

### 3.3 アプリを起動する

デスクトップに作られたショートカットから起動します。  
このショートカットは「作業フォルダ（Start in）」が固定されているため、データファイルの場所で迷いません。

---

## 4. 使い方（これだけ覚えればOK）

### 4.1 最初に商品を登録する

1. タブ **在庫 入出庫（単発/一括/マスタ）** を開く
2. **商品マスタ** を選ぶ
3. 次を入力して **追加/更新** を押す

   * 商品コード（SKU）
   * 商品名
   * 単価
   * カテゴリ
   * 初期在庫数

---

### 4.2 在庫を増やす / 減らす

#### 1つずつ操作する場合

1. **単発（IN OUT ADJUST）** を開く
2. 操作を選ぶ

   * IN：在庫を増やす
   * OUT：在庫を減らす
3. 商品と数量を選ぶ
4. **実行** を押す

#### まとめて操作する場合

1. **一括（IN/OUT）** を開く
2. 商品と数量を入れて **明細に追加**
3. 最後に **一括反映**

---

### 4.3 在庫の履歴を見る

* 一覧で見る → **在庫履歴（一覧/グラフ） → 一覧**
* グラフで見る → **在庫履歴（一覧/グラフ） → グラフ**

グラフでは商品と期間を選ぶだけで表示されます。

---

### 4.4 売上を入力する（在庫は変わりません）

1. **顧客リスト** で顧客を登録
2. **売上入力（顧客別）** で商品と数量を入力
3. **売上集計** で合計を確認

---

## 5. データの保存場所

- データは配布フォルダ `_dist\inventory-sales-tool\` 内の `sales_inventory_tool.json` に保存されます
- アプリを閉じてもデータは消えません

GitHub にアップする場合は、このファイルは含めないでください。

`.gitignore` の例:

```gitignore
sales_inventory_tool.json
__pycache__/
.venv/
build/
dist/
_dist/
```

---

## 6. よくあるトラブル

### 6.1 Python が見つからない

Python がインストールされていない、または PATH が通っていません。  
「1.1 Python をインストールする」をやり直してください。

確認例:

```powershell
python --version
```

---

### 6.2 `.bat` 実行で止まる

エラー内容がすぐ消える場合は、次の手順で実行してください。

1. フォルダの空白で **Shift + 右クリック** → ターミナルを開く
2. 次を実行

```powershell
.\build_and_shortcut.bat
```

---

### 6.3 画面が出ない / すぐ閉じる

まずはデスクトップのショートカットから起動してください。  
それでも解決しない場合、`_dist\inventory-sales-tool\` の中の exe を「ターミナルから」起動してエラーを確認してください。

---

## 技術者の方へ

* 設計・構成・拡張方法は **[TECHNICAL.md](TECHNICAL.md)** を参照してください
* JSON構造、UI構成、拡張ポイントをまとめています
